10 ORG 100H
20 JP MAIN
30SCRLP EQU 084F7H
35PUTCHR EQU 08440H
40INITSR EQU 0871AH
50OPENSR EQU 0BCE8H
60CLOSSR EQU 0BCEBH
70LRDSR EQU 0BD15H
80WAITK EQU 0BFCDH
90WSTSR EQU 0BFB2H
100MAIN: CALL INITSR
110 CALL OPENSR
115 CALL CLS
120 LD IX, L2
130 LD B, 4
140 LD HL, L1
150LOOP: LD A, (IX)
160 CALL BYTE
170 INC IX
250 DJNZ LOOP
260 LD HL, L0
270 CALL WSTSR
280 LD DE, 00100H
290 LD HL, L0
300 LD B, 37
310 CALL DSPSTR
320LOOP0: CALL 089BEH
330 CP 0
350 JP Z, LOOP0

400 CALL CLOSSR
410 RET

500CLS: LD B, 6
502 LD DE, 0
504CLS1: PUSH BC
506 LD B, 24
508CLS2: LD A, 32
510 PUSH BC
512 PUSH DE
514 PUSH HL
516 CALL PUTCHR
518 POP HL
520 POP DE
522 POP BC
510 INC E
512 DJNZ CLS2
514 INC D
516 LD E, 0
518 POP BC
520 DJNZ CLS1
522 RET

600DSPSTR: LD A, (HL)
610 INC HL
620 PUSH BC
630 PUSH DE
640 PUSH HL
650 CALL PUTCHR
660 POP HL
670 POP DE
680 POP BC
690 INC E
700 LD A, E
710 SUB 24
720 JP M, SKIP0
730 INC D
740 LD E, 0
750SKIP0: DJNZ DSPSTR
760 RET

800BYTE: PUSH AF
810 AND 0F0H
811 RRCA
812 RRCA
813 RRCA
814 RRCA
815 CALL NIBBLE
816 INC HL
817 POP AF
818 AND 15
819 CALL NIBBLE
820 INC HL
821 RET
830NIBBLE: SUB 10
831 JP M, ZERO9
832 ADD A, 7
833ZERO9: ADD A, 58
834 LD (HL), A
835 RET 

1000L0: DB 'Converting HEX to ASCII: 0x'
1001L1: DB 0,0,0,0,0,0,0,0
1002 DB 13,10,0
1010L2: DB 0DEH, 0CAH, 0FBH, 0ADH

