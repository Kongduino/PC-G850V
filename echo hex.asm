10 ORG 100H
20 JP MAIN
30SCRLP EQU 084F7H
40INITSR EQU 0871AH
50OPENSR EQU 0BCE8H
60CLOSSR EQU 0BCEBH
70LRDSR EQU 0BD15H
80WAITK EQU 0BFCDH
90WSTSR EQU 0BFB2H
100MAIN: CALL INITSR
110 CALL OPENSR
120 LD IX, L2
130 LD B, 4
140 LD HL, L1
150LOOP: LD A, (IX)
160 AND 0F0H
170 RRCA
171 RRCA
172 RRCA
173 RRCA
180 CALL NIBBLE
190 INC HL
200 LD A, (IX)
205 INC IX
210 AND 15
220 CALL NIBBLE
225 INC HL
250 DJNZ LOOP
260 LD HL, L0
270 CALL WSTSR
280 LD DE, 0000H
290 LD HL, L0
300 LD B, 24
310DSP0: LD A, (HL)
320 INC HL
321 PUSH BC
322 PUSH DE
323 PUSH HL
330 CALL 08440H
331 POP HL
332 POP DE
333 POP BC
340 INC E
350 DJNZ DSP0
359 LD HL, L1
360 LD B, 8
365 LD DE, 00100H
370DSP1: LD A, (HL)
380 INC HL
381 PUSH BC
382 PUSH DE
383 PUSH HL
390 CALL 08440H
391 POP HL
392 POP DE
393 POP BC
400 INC E
410 DJNZ DSP1

600 CALL CLOSSR
610 RET

800NIBBLE: SUB 10
820 JP M, ZERO9
830 ADD A, 7
840ZERO9: ADD A, 58
850 LD (HL), A
860 RET 


1000L0: DB 'Converting HEX to ASCII: 0x'
1010L1: DB 0,0,0,0,0,0,0,0
1020 DB 13,10,0
1030L2: DB 0DEH, 0CAH, 0FBH, 0ADH

