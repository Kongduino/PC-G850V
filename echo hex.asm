10 ORG 100H
20 JP MAIN
30SCRLP EQU 084F7H
40INITSR EQU 0871AH
50OPENSR EQU 0BCE8H
60CLOSSR EQU 0BCEBH
70LRDSR EQU 0BD15H
80WAITK EQU 0BFCDH
90WSTSR EQU 0BFB2H
100MAIN: CALL INITSR
110 CALL OPENSR
120 LD IX, L2
130 LD B, 4
140 LD HL, L1
150LOOP: LD A, (IX)
160 CALL BYTE
170 INC IX
250 DJNZ LOOP
260 LD HL, L0
270 CALL WSTSR
280 LD DE, 0000H
290 LD HL, L0
300 LD B, 37
310 CALL DSPSTR
320LOOP0: CALL 089BEH
330 CP 0
350 JP Z, LOOP0


400 CALL CLOSSR
410 RET

600DSPSTR: LD A, (HL)
610 INC HL
620 PUSH BC
630 PUSH DE
640 PUSH HL
650 CALL 08440H
660 POP HL
670 POP DE
680 POP BC
690 INC E
700 LD A, E
710 SUB 24
720 JP M, SKIP0
730 INC D
740 LD E, 0
750SKIP0: DJNZ DSPSTR
760 RET

800BYTE: PUSH AF
810 AND 0F0H
820 RRCA
821 RRCA
822 RRCA
823 RRCA
824 CALL NIBBLE
825 INC HL
826 POP AF
827 AND 15
828 CALL NIBBLE
829 INC HL
830 RET
840NIBBLE: SUB 10
850 JP M, ZERO9
860 ADD A, 7
870ZERO9: ADD A, 58
880 LD (HL), A
890 RET 


1000L0: DB 'Converting HEX to ASCII: 0x'
1010L1: DB 0,0,0,0,0,0,0,0
1020 DB 13,10,0
1030L2: DB 0DEH, 0CAH, 0FBH, 0ADH

