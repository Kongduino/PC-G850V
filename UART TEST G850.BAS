100 'PC-G850 UART TEST
110 OUT &H60,2 'UARTモード
120 OUT &H6D,&H80 'SIOリセット
130 OUT &H6D,&H40 'エラークリア
140 OUT &H63,0 'フロークリア
150 OUT &H6C,&H0D '9600baud,受信割込可,パリティなし
160 OUT &H6D,&H30 '送受信イネーブル
170 OUT &H63,&H14 'DR,RS ON
180 *LOOP
190 X= INP (&H6E)
200 IF (X AND &H10)<>0 THEN GOTO *RECEIVE '受信あり?
210 IF (X AND &H04)<>0 THEN GOTO *SEND '送信可?
220 GOTO *LOOP
230 *RECEIVE
240 X$= CHR$ ( INP (&H6F)) 'データ受信
250 PRINT X$;
260 GOTO *LOOP
270 *SEND
280 X$= INKEY$
290 IF X$="" THEN GOTO *LOOP
300 OUT &H6F, ASC (X$) 'データ送信
310 GOTO *LOOP

